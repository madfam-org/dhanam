apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- namespace.yaml
- api-deployment.yaml
- admin-deployment.yaml
- web-deployment.yaml

# Image transformer: maps short names to full GHCR paths
# CI workflows update these entries with @sha256:... digests after each build
images:
- digest: sha256:eaa4b628c4c74bce7b63588658afbf29ee8eefe40f4db40fe800bafd9c62d754
  name: dhanam-admin
  newName: ghcr.io/madfam-org/dhanam/admin
- digest: sha256:9b4c5d42f1a97a49fa5e892ad01b95fa3b4189a9ad61f6548b6d2f394f8b3ec1
  name: dhanam-api
  newName: ghcr.io/madfam-org/dhanam/api
- digest: sha256:01a8d490f06b19d03dd95d9ad5edf1f6aece659842518ce77960926087727ece
  name: dhanam-web
  newName: ghcr.io/madfam-org/dhanam/web
